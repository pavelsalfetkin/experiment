<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Павел Салфеткин</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <!-- <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> -->
    <link rel="icon" href="img/favicon.png" sizes="any" type="image/png">
  </head>

  <body>

    <div id="container">
      <div id="section1">1</div>
      <div id="section2">2</div>
      <div id="section3">3</div>

      <!-- <div id="circle1"></div>
      <div id="circle2"></div>
      <div id="circle3">EARTH</div>
      <div id="circle4"></div> -->
    </div>
    
    <script>
      // document.addEventListener("touchmove", function(e) {
      //   console.log("document.touchmove");
      //   e.preventDefault();
      // }, false);


      var container = document.getElementById("container");
      var section1 = document.getElementById("section1");
      var section2 = document.getElementById("section2");
      var section3 = document.getElementById("section3");


      const switchToSection1 = () => {
        container.style.transform = 'translate3d(0px, 0px, 0px)';
        container.style.transition = 'all 700ms ease 0s';
      };

      const switchToSection2 = () => {
          container.style.transform = 'translate3d(0px, -100%, 0px)';
          container.style.transition = 'all 700ms ease 0s';
      };

      const switchToSection3 = () => {
          container.style.transform = 'translate3d(0px, -200%, 0px)';
          container.style.transition = 'all 700ms ease 0s';
      };


      function swipeFromSection1 (event) {
        console.log(`event.target`, event.target);
        // switchToSection2();
        this.startPoint = event.targetTouches[0].clientY;
        this.endPoint;
        this.addEventListener('touchmove', function(event) {
          this.endPoint = event.targetTouches[0].clientY;
          if (this.startPoint > this.endPoint) switchToSection2();
        }, false);
        // this.addEventListener('touchend', function() {
        // 	if (this.startPoint > this.endPoint) switchToSection2();
        // });
      }

      function swipeFromSection2 (event) {
        console.log(`event.target`, event.target);
        // switchToSection3();
        this.startPoint = event.targetTouches[0].clientY;
        this.endPoint;
        this.addEventListener('touchmove', function(event) {
          this.endPoint = event.targetTouches[0].clientY;
          if (this.startPoint > this.endPoint) switchToSection3();
          else switchToSection1();
        }, false);
        // this.addEventListener('touchend', function() {
        // 	if (this.startPoint > this.endPoint) switchToSection3();
        // 	else switchToSection1();
        // });	
      }

      function swipeFromSection3 (event) {
        console.log(`event.target`, event.target);
        // switchToSection1();
        this.startPoint = event.targetTouches[0].clientY;
        this.endPoint;
        this.addEventListener('touchmove', function(event) {
          this.endPoint = event.targetTouches[0].clientY;
          if (this.startPoint < this.endPoint) switchToSection2();
        }, false);
        // this.addEventListener('touchend', function() {
        // 	if (this.startPoint < this.endPoint) switchToSection2();
        // });
      }


      section1.addEventListener('touchstart', swipeFromSection1, false);
      section2.addEventListener('touchstart', swipeFromSection2, false);
      section3.addEventListener('touchstart', swipeFromSection3, false);

      section1.addEventListener('wheel', function(e) {
        if (e.deltaY > 10) switchToSection2();
      });

      section2.addEventListener('wheel', function(e) {
        if (e.deltaY < -10) switchToSection1();
        else if (e.deltaY > 10) switchToSection3();
      });

      section3.addEventListener('wheel', function(e) {
        if (e.deltaY < -10) switchToSection2();
      });

      section1.addEventListener('scroll', function(e) {
        if (e.deltaY > 10) switchToSection2();
      });

      section2.addEventListener('scroll', function(e) {
        if (e.deltaY < -10) switchToSection1();
        else if (e.deltaY > 10) switchToSection3();
      });

      section3.addEventListener('scroll', function(e) {
        if (e.deltaY < -10) switchToSection2();
      });


    </script>
    
    <!-- <script type="text/javascript" src="js/main.js"></script> -->
    
  </body>
</html>